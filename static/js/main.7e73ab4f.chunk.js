(this["webpackJsonpread-csv-file-test-task"]=this["webpackJsonpread-csv-file-test-task"]||[]).push([[0],{11:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(5),r=n.n(c),s=(n(11),n(2)),o=n(6),l=n.n(o),u={alabama:"AL",alaska:"AK","america samoa":"AS",arizona:"AZ",arkansas:"AR",california:"CA",colorado:"CO",connecticut:"CT",delaware:"DE","district of columbia":"DC",micronesia:"FM",florida:"FL",georgia:"GA",guam:"GU",hawaii:"HI",idaho:"ID",illinois:"IL",indiana:"IN",iowa:"IA",kansas:"KS",kentucky:"KY",louisiana:"LA",maine:"ME","marshall islands":"MH",maryland:"MD",massachusetts:"MA",michigan:"MI",minnesota:"MN",mississippi:"MS",missouri:"MO",montana:"MT",nebraska:"NE",nevada:"NV","new hampshire":"NH","new jersey":"NJ","new mexico":"NM","new york":"NY","north carolina":"NC","north dakota":"ND",ohio:"OH",oklahoma:"OK",oregon:"OR",palau:"PW",pennsylvania:"PA","puerto rico":"PR","rhode island":"RI","south carolina":"SC","south dakota":"SD",tennessee:"TN",texas:"TX",utah:"UT",vermont:"VT","virgin island":"VI",virginia:"VA",washington:"WA","west virginia":"WV",wisconsin:"WI",wyoming:"WY"},d=n(0);var h=function(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),i=n[0],c=n[1],r=function(e,t){if("Phone"===t){if(e.match(/^\d{10}$/))return"+1".concat(e);if(e.match(/^\+1\d{10}$/))return e;if(e.match(/^1\d{10}$/))return"+".concat(e)}return e},o=function(e,t){return"Has children"===t&&""===e?"FALSE":e},h=function(e,t){if("License states"===t){var n=Object.keys(u);return e.split(/, |,/).map((function(e){var t=e.toLowerCase();return n.includes(t)?u[t]:e.toUpperCase()})).join("|")}return e},j=function(t){var n=t.data;p(n)&&e.isCSVFileValid&&(n=n.map((function(e,t){return e.id=t+1,e["Duplicate with"]=null,e})),f(n),e.setTableData(n),console.log("Finished: ",n))},f=function(e){e.map((function(t){var n=t.Email.toLowerCase(),a=t.Phone.toLowerCase(),i=e.find((function(e){return(e.Email.toLowerCase()===n||e.Phone.toLowerCase()===a)&&e.id!==t.id}));i&&(t["Duplicate with"]=i.id)}))},p=function(t){var n=Object.keys(t[0]).map((function(e){return e.toLowerCase()}));return!!(n.includes("full name")&&n.includes("phone")&&n.includes("email"))||(e.setIsCSVFileValid(!1),!1)};return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h2",{children:"Import Users"}),Object(d.jsx)("input",{className:"csv-input",type:"file",name:"csvfile",onChange:function(e){c(e.target.files[0])}}),Object(d.jsx)("p",{}),Object(d.jsx)("button",{className:"btn btn-primary",onClick:function(){if(!i)return alert("Please, upload file");"application/vnd.ms-excel"===i.type?(e.setIsCSVFileValid(!0),l.a.parse(i,{complete:j,skipEmptyLines:!0,header:!0,transform:function(e,t){return e=e.trim(),e=r(e,t),e=o(e,t),e=h(e,t)}})):e.setIsCSVFileValid(!1)},children:" Upload now"})]})},j=(n(13),n(4)),f=n.n(j);function p(e){var t=parseFloat(e.Age);return t>=21&&t<=110&&Number.isInteger(t)}function m(e){var t=parseFloat(e.Experience),n=parseFloat(e.Age);return t>=0&&t<n}function b(e){var t=e["Yearly Income"],n=parseFloat(t),a=t.split(".");return!!(Number.isInteger(n)&&n<1e6&&n>=0)||!!a[1]&&!(a[1].length>2)}function x(e){var t=new Date,n=f()(e["Expiration date"],"YYYY-MM-DD",!0),a=f()(e["Expiration date"],"MM/DD/YYYY",!0);return!(t>e["Expiration date"])&&(n.isValid()||a.isValid())}function O(e){var t=e.Phone;return t.startsWith("+1")&&12===t.length}function v(e){var t=e["Has children"].toLowerCase();return"true"===t||"false"===t||""===t}function g(e){return 6===e["License number"].length}function w(e){return e["License states"].match(/[A-Z]{2}\||[A-Z]{2}/)}var C=function(e){switch(e){case"Age":return p;case"Experience":return m;case"Yearly Income":return b;case"Expiration date":return x;case"Phone":return O;case"Has children":return v;case"License number":return g;case"License states":return w;default:return null}};var I=function(e){return e.keys.map((function(t){return Object(d.jsx)("td",{id:t+"-"+e.idx,children:e.data[t]},t+"-"+e.idx)}))},L=function(e){var t=function(){return e.data!==[]?Object.keys(e.data[0]):null};Object(a.useEffect)((function(){n()}),[e.data]);var n=function(){e.data.map((function(e,n){return t().map((function(t){var a=C(t);a&&(a(e)||document.getElementById(t+"-"+n).classList.add("failed-cell"))}))}))};return Object(d.jsx)("div",{className:"d-flex justify-content-center",children:Object(d.jsxs)("table",{className:"table small",children:[Object(d.jsx)("thead",{className:"thead-dark",children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{scope:"col",children:"Id"}),Object(d.jsx)("th",{scope:"col",children:"Full Name"}),Object(d.jsx)("th",{scope:"col",children:"Phone"}),Object(d.jsx)("th",{scope:"col",children:"Email"}),Object(d.jsx)("th",{scope:"col",children:"Age"}),Object(d.jsx)("th",{scope:"col",children:"Experience"}),Object(d.jsx)("th",{scope:"col",children:"Yearly Income"}),Object(d.jsx)("th",{scope:"col",children:"Has children"}),Object(d.jsx)("th",{scope:"col",children:"License states"}),Object(d.jsx)("th",{scope:"col",children:"Expiration date"}),Object(d.jsx)("th",{scope:"col",children:"License number"}),Object(d.jsx)("th",{scope:"col",children:"Duplicate with"})]})}),Object(d.jsx)("tbody",{children:e.data.map((function(e,n){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{scope:"row",children:e.id}),Object(d.jsx)(I,{idx:n,data:e,keys:t().filter((function(e){return"id"!==e}))})]},n)}))})]})})};var k=function(){return Object(d.jsx)("div",{className:"container error",children:"File is invalid"})};n(15);var y=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(!0),r=Object(s.a)(c,2),o=r[0],l=r[1];return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(h,{setTableData:i,isCSVFileValid:o,setIsCSVFileValid:l}),o?Object(d.jsx)(L,{data:n,setTableData:i}):Object(d.jsx)(k,{})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(y,{})}),document.getElementById("root")),N()}},[[16,1,2]]]);
//# sourceMappingURL=main.7e73ab4f.chunk.js.map